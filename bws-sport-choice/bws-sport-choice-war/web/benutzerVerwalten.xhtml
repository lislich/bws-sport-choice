<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>

        <ui:composition template="./template.xhtml">

            <ui:define name="title">
                Benutzer verwalten
            </ui:define>

            <ui:define name="content">
                <div class="row">
                    <div class="small-12 columns small-centered">
                        <h:form>
                            <fieldset>
                                <legend>Benutzerverwaltung</legend>
                                <!--<div class="row collapse">
                                    <div class="small-4 columns">
                                        <span class="prefix">Rolle</span>
                                    </div>
                                    <div class="small-8 columns mobile-input">
                                        <h:selectOneMenu id="filterRolle" class="filter input-group-field" value="#!{benutzerVerwaltenNB.rolle}" >
                                            <f:selectItems value="#!{benutzerVerwaltenNB.alleRollen}" />
                                        </h:selectOneMenu>
                                    </div> 
                                </div>-->
                                <!--<div class="row collapse">
                                    <div class="small-4 columns">
                                        <span class="prefix">Stufe</span>
                                    </div>
                                    <div class="small-8 columns mobile-input">
                                        <h:selectOneMenu id="filterStufe" class="filter input-group-field" value="#/{benutzerVerwaltenNB.stufe}" >
                                            <f:selectItems value="#/{stufeNB.alleStufen}" var="stufe" itemValue="#/{stufe}" itemLabel="#/{stufe.bezeichnung}"/>
                                        </h:selectOneMenu>
                                    </div>
                                </div>-->
                            
                                <table id="tableBenutzer">
                                    <thead>
                                        <tr>
                                            <th width="100">Vorname</th>
                                            <th width="100">Nachname</th>
                                            <th width="100">Benutzername</th>
                                            <th width="100">Rolle</th>
                                            <th class="lehrer" width="50">Kürzel</th>
                                            <th class="schueler" width="50">Tutor</th>
                                            <th class="schueler" width="25">Stufe</th>
                                            <th><h:selectBooleanCheckbox id="alleWaehlen" value="false" /></th>
                                        </tr>
                                    </thead>    
                                    <tbody id="tbodyBenutzer">
                                        <ui:repeat var="entry" value="#{benutzerNB.auswahl}">
                                            <tr>
                                                <td><h:outputText value="#{entry.key.person.vorname}" /></td>
                                                <td><h:outputText value="#{entry.key.person.nachname}" /></td>
                                                <td><h:outputText value="#{entry.key.benutzername}" /></td>
                                                <td><h:outputText value="#{entry.key.rolle}"/></td>
                                                <td class="lehrer"><h:outputText value="#{entry.key.person.kuerzel}" /></td>
                                                <td class="schueler"><h:outputText value="#{entry.key.person.tutor.kuerzel}" /></td>
                                                <td class="schueler"><h:outputText value="#{entry.key.person.stufe.bezeichnung}" /></td>
                                                <td><input type="checkbox" immediate="true" class="cbWaehlen" value="#{entry.value}" /></td>
                                            </tr>
                                        </ui:repeat>
                                    </tbody>
                                </table>
                            
                                <h:commandButton class="small button" id="anlegen" value="Anlegen.." action="benutzerAnlegen" />
                                <h:commandButton class="small button" value="Ändern.." action="#{benutzerVerwaltenNB.aendern()}" />
                                <h:commandButton class="small button" id="loeschen" value="Löschen" action="#{benutzerVerwaltenNB.loeschen()}" />
                                <h:commandButton class="small button" value="Hochstufen" action="#{benutzerVerwaltenNB.hochstufen()}" />
                                <h:commandButton class="small button" value="Abstufen" action="#{benutzerVerwaltenNB.abstufen()}" />
                                
                                <h:button id="refreshFilter" onclick="#{benutzerVerwaltenNB.auswaehlen()}" style="display: none" />
                            </fieldset>
                        </h:form>
                    </div>
                </div>
            </ui:define>
        </ui:composition>
    </body>
</html>
